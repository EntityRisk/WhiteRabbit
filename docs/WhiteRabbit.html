<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>WhiteRabbit.utf8.md</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link rel='shortcut icon' type='image/x-icon' href='favicon.ico' />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><div><img src="images/ohdsi16x16.png"></img> OHDSI White Rabbit</div></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="glyphicon glyphicon-home"></span>
     
  </a>
</li>
<li>
  <a href="WhiteRabbit.html">
    <span class="glyphicon glyphicon-list"></span>
     
    White Rabbit
  </a>
</li>
<li>
  <a href="RabbitInAHat.html">
    <span class="glyphicon glyphicon-list-alt"></span>
     
    Rabbit In A Hat
  </a>
</li>
<li>
  <a href="riah_test_framework.html">
    <span class="glyphicon glyphicon-dashboard"></span>
     
    Test Framework
  </a>
</li>
<li>
  <a href="best_practices.html">
    <span class="glyphicon glyphicon-check"></span>
     
    Best Practices
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ohdsi/whiterabbit">
    <span class="glyphicon glyphicon-link"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<p><img src="images/whiterabbitlogo.png" /></p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<div id="scope-and-purpose" class="section level2">
<h2>Scope and purpose</h2>
<p>WhiteRabbit is a software tool to help prepare for ETLs (Extraction, Transformation, Loading) of longitudinal healthcare databases into the <a href="www.github.com/OHDSI/CommonDataModel/wiki">Observational Medical Outcomes Partnership (OMOP) Common Data Model (CDM)</a>. The source data can be in comma-separated text files, SAS files, or in a database (MySQL, SQL Server, Oracle, PostgreSQL, Microsoft APS, Microsoft Access, Amazon RedShift, PDW, Teradata, Google BigQuery). Note that for support of the OHDSI analytical tooling, the OMOP CDM will need to be in one of a limited set of database platforms (SQL Server, Oracle, PostgreSQL, Microsoft APS, Amazon RedShift, Google BigQuery, Impala).</p>
<p>WhiteRabbit’s main function is to perform a scan of the source data, providing detailed information on the tables, fields, and values that appear in a field. This scan will generate a report that can be used as a reference when designing the ETL, for instance by using the Rabbit-In-a-Hat tool. White Rabbit differs from standard data profiling tools in that it attempts to prevent the display of personally identifiable information (PII) data values in the generated output data file.</p>
</div>
<div id="process-overview" class="section level2">
<h2>Process Overview</h2>
<p>The typical sequence for using this software to scan source data in preparation of developing an ETL into an OMOP CDM: 1. Set working folder, the location on the local desktop computer where results will be exported. 2. Connect to the source database or CSV text file and test connection. 3. Select the tables of interest for the scan and scan the tables. 4. WhiteRabbit creates an export of information about the source data.</p>
<p>Once the scan report is created, this report can then be used in the Rabbit-In-a-Hat tool or as a stand-alone data profiling document.</p>
</div>
</div>
<div id="installation-and-support" class="section level1">
<h1>Installation and support</h1>
<p>All source code and installation instructions available on GitHub: <a href="https://github.com/OHDSI/WhiteRabbit" class="uri">https://github.com/OHDSI/WhiteRabbit</a></p>
<p>Any bugs/issues/enhancements should be posted to the GitHub repository: <a href="https://github.com/OHDSI/WhiteRabbit/issues" class="uri">https://github.com/OHDSI/WhiteRabbit/issues</a></p>
<p>Any questions/comments/feedback/discussion can be posted on the OHDSI Developer Forum: <a href="http://forums.ohdsi.org/c/developers" class="uri">http://forums.ohdsi.org/c/developers</a></p>
</div>
<div id="using-the-application-functions" class="section level1">
<h1>Using the Application Functions</h1>
<div id="specifying-the-location-of-source-data" class="section level2">
<h2>Specifying the Location of Source Data</h2>
<p><img src="images/whiterabbitscreenshot.png" /></p>
<div id="working-folder" class="section level3">
<h3>Working Folder</h3>
<p>Any files that WhiteRabbit creates will be exported to this local folder. Use the “Pick Folder” button to navigate in your local environment where you would like the scan document to go.</p>
</div>
<div id="source-data" class="section level3">
<h3>Source Data</h3>
<p>Here you can specify the location of the source data. The following source types are supported: delimited text files, SAS files, MySQL, SQL Server, Oracle, PostgreSQL, Microsoft APS, Microsoft Access, Amazon RedShift, PDW, Teradata, Google BigQuery. Below are connection instructions for each data type of data source. Once you have entered the necessary information, the “Test connection” button can ensure a connection can be made.</p>
<div id="delimited-text-files" class="section level4">
<h4>Delimited text files</h4>
<ul>
<li><strong><em>Delimiter:</em></strong> specifies the delimiter that separates columns, default is ‘,’ and your can write ‘tab’ for tab delimited.</li>
</ul>
<p>WhiteRabbit will look for the files to scan in the same folder you set up as a working directory.</p>
</div>
<div id="sas" class="section level4">
<h4>SAS</h4>
<ul>
<li>No parameters have to be provided for SAS files.</li>
</ul>
<p>WhiteRabbit will look for <code>.sas7bdat</code> files to scan in the same folder you set up as a working directory.</p>
<p>Note that it is currently not possible to produce fake data for SAS files from a scan report.</p>
</div>
<div id="mysql" class="section level4">
<h4>MySQL</h4>
<ul>
<li><em><strong>Server location:</strong></em> the name or IP address of the server running MySQL. You can also specify the port (ex: <code>&lt;host&gt;:&lt;port&gt;</code>), which defaults to 3306.</li>
<li><em><strong>User name:</strong></em> name of the user used to log into the server</li>
<li><em><strong>Password:</strong></em> password for the supplied user name</li>
<li><em><strong>Database name:</strong></em> name of the database containing the tables</li>
</ul>
</div>
<div id="oracle" class="section level4">
<h4>Oracle</h4>
<ul>
<li><em><strong>Server location:</strong></em> this field contains the SID, service name, and optionally the port: <code>&lt;host&gt;/&lt;sid&gt;</code>, <code>&lt;host&gt;:&lt;port&gt;/&lt;sid&gt;</code>, <code>&lt;host&gt;/&lt; service name &gt;</code>, or <code>&lt;host&gt;:&lt;port&gt;/&lt;service name&gt;</code></li>
<li><em><strong>User name:</strong></em> name of the user used to log into the server</li>
<li><em><strong>Password:</strong></em> password for the supplied user name</li>
<li><em><strong>Database name:</strong></em> this field contains the schema (i.e. ‘user’ in Oracle terms) containing the tables</li>
</ul>
</div>
<div id="sql-server" class="section level4">
<h4>SQL Server</h4>
<ul>
<li><em><strong>Server location:</strong></em> the name or IP address of the server running SQL Server. You can also specify the port (ex: <code>&lt;host&gt;:&lt;port&gt;</code>), which defaults to 1433.</li>
<li><em><strong>User name:</strong></em> name of the user used to log into the server. Optionally, the domain can be specified as <code>&lt;domain&gt;/&lt;user&gt;</code> (e.g. ‘MyDomain/Joe’)</li>
<li><em><strong>Password:</strong></em> password for the supplied user name</li>
<li><em><strong>Database name:</strong></em> name of the database containing the tables</li>
</ul>
<p>When the SQL Server JDBC drivers are installed, you can also use Windows authentication. In this case, user name and password should be empty. 1. Download the .exe from <a href="http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx" class="uri">http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx</a>. 2. Run it, thereby extracting its contents to a folder. 3. In the extracted folder you will find the file <code>_sqljdbc_4.0/enu/auth/x64/sqljdbc_auth.dll_</code> (64-bits) or <code>_sqljdbc_4.0/enu/auth/x86/sqljdbc_auth.dll_</code> (32-bits), which needs to be moved to a location on the system path, for example to <code>c:/windows/system32</code>.</p>
</div>
<div id="postgresql" class="section level4">
<h4>PostgreSQL</h4>
<ul>
<li><em><strong>Server location:</strong></em> this field contains the host name and database name (<host>/<database>)</li>
<li><em><strong>User name:</strong></em> name of the user used to log into the server</li>
<li><em><strong>Password:</strong></em> password for the supplied user name</li>
<li><em><strong>Database name:</strong></em> this field contains the schema containing the source tables</li>
</ul>
</div>
<div id="google-bigquery" class="section level4">
<h4>Google BigQuery</h4>
<p>Google BigQuery (GBQ) supports two different connection/authentication methods – application default credentials and service account authentication. The former method is considered more secure because it writes auditing events to stackdriver. The specific method used is determined by the arguments provided to the configuration panel as described below.</p>
<p>Authentication via application default credentials:</p>
<p>When using application default credentials authentication, you must run the following gcloud command in the user account only once: <code>gcloud auth application-default login</code> (do not include the single quote characters). An application key is written to <code>~/.config/gcloud/application_default_credentails.json</code>.</p>
<ul>
<li><em><strong>Server location:</strong></em> name of the GBQ ProjectID</li>
<li><em><strong>User name:</strong></em> not used</li>
<li><em><strong>Password:</strong></em> not used</li>
<li><em><strong>Database name:</strong></em> data set name within ProjectID named in Server location field</li>
</ul>
<p>Authentication via service account credentials:</p>
<ul>
<li><em><strong>Server location:</strong></em> name of GBQ ProjectID</li>
<li><em><strong>User name:</strong></em> OAuth service account email address</li>
<li><em><strong>Password:</strong></em> OAuth private key path (file location of private key JSON file). Must be a valid full file pathname</li>
<li><em><strong>Database name:</strong></em> data set name within ProjectID named in Server location field</li>
</ul>
</div>
</div>
</div>
<div id="scanning-a-database" class="section level2">
<h2>Scanning a Database</h2>
<div id="performing-the-scan" class="section level3">
<h3>Performing the Scan</h3>
<p><img src="images/whiterabbitscreen-scan.png" /></p>
<p>A scan generates a report containing information on the source data that can be used to help design the ETL. Using the Scan tab in WhiteRabbit you can either select individual tables in the selected source database by clicking on ‘Add’ (Ctrl + mouse click), or automatically select all tables in the database by clicking on ‘Add all in DB’.</p>
<p>There are a few setting options as well with the scan:</p>
<ul>
<li>Checking the “Scan field values” tells WhiteRabbit that you would like to investigate raw data items within tables selected for a scan (i.e. if you select Table A, WhiteRabbit will review the contents in each column in Table A).
<ul>
<li>“Min cell count” is an option when scanning field values. By default this is set to 25, meaning values in the source data that appear less than 25 will not appear in the report.</li>
<li>“Rows per table” is an option when scanning field values. By default, WhiteRabbit will random 1 million rows in the table. There are other options to review 100,000 or all rows within the table.</li>
</ul></li>
<li>Unchecking the “Scan field values” tells WhiteRabbit to not review or report on any of the raw data items.</li>
</ul>
<p>Once all settings are completed, press the “Scan tables” button. After the scan is completed the report will be written to the working folder.</p>
</div>
<div id="running-from-the-command-line" class="section level3">
<h3>Running from the command line</h3>
<p>For various reasons one could prefer to run WhiteRabbit from the command line. This is possible by specifying all the options one would normally select in the user interface in an .ini file. An example ini file can be found in the <a href="https://github.com/OHDSI/WhiteRabbit/blob/master/iniFileExamples/WhiteRabbit.ini">iniFileExamples folder</a>. Then, we can reference the ini file when calling WhiteRabbit from the command line:</p>
<p><code>java -jar WhiteRabbit.jar -ini WhiteRabbit.ini</code></p>
</div>
<div id="reading-the-scan" class="section level3">
<h3>Reading the Scan</h3>
<p>After the scan is completed, a “ScanReport” Excel document will be created in the working folder location selected earlier. The document will have multiple tabs, one as an “Overview” and then one tab for each database table or delimited text files selected for the scan. The “Overview” tab will tell you about each table selected, what the columns in each table are, the data type of the columns, the number of rows within the table and other statistics.</p>
<p>Below is an example image of the “Overview” tab. - Column A will list what table the information is about - Column B the column name - Column C the data type - Column D the maximum length of the values (number of characters/digits) - Column E is the number of rows (with text files it will return - 1) - Column F will tell you how many rows of the N rows were scanned - Column G shows how many of the checked rows are empty - Column H shows a count of the unique values within the checked rows. This number is sometimes an upper limit of the unique values, indicated by a <code>&lt;=</code> sign (v0.9.0) - Column I shows the percentage of unique values among all (0% = constant value, 100% = unique column) (v0.9.0)</p>
<p><img src="images/wr_scan_report_overview.png" /></p>
<p>For a tab that describes a single table, the columns names from the source table (or delimited text file) will be across the columns of the Excel tab. Each source table column will generate two columns in the Excel. One column will list all distinct values that have a “Min cell count” greater than what was set at time of the scan (Section - Performing the Scan). If a list of unique values was truncated, the last value in the list will be “List truncated”; this indicates that there are one or more additional unique source values that appear less than the number entered in the “Min cell count” described in Section - Performing the Scan. Next to each distinct value will be a second column that contains the frequency, or the number of times that value occurs in the data. These two columns (distinct values and frequency) will repeat for all the source columns in the table profiled in the workbook.</p>
<p><img src="images/whiterabbitscreen-readingthescanex.png" /></p>
<p>The report is powerful in understanding your source data by highlighting what exists. For example, the above results were given back on the “SEX” column within one of the tables scanned, we can see that there were two common values (1 and 2) that appeared 61,491 and 35,401 times respectively. WhiteRabbit will not define 1 as male and 2 as female; the data holder will typically need to define source codes unique to the source system. However these two values (1 &amp; 2) are not the only values present in the data because we see this list was truncated. These other values appear with very low frequency (defined by “Min cell count”) and often represent incorrect or highly suspicious values. When generating an ETL we should not only plan to handle the high-frequency gender concepts 1 and 2 but the other low-frequency values that exist within this column.</p>
</div>
</div>
<div id="generating-fake-data" class="section level2">
<h2>Generating Fake Data</h2>
<p>This feature allows one to create a fake dataset based on a WhiteRabbit scan report. Fake data can be generated outputted directly to database tables or as csv. The resulting dataset could be used to develop ETL code when direct access to the data is not available. This feature is currently still experimental.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
